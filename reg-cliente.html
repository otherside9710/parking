<!DOCTYPE html>
<html lang="es">

<head>
    <div id="head"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<script>
    $(document).ready(function () {
        $('#header').load("fragments/header.html");
        $('#head').load("fragments/head.html");
        $('#menu').load("fragments/menu.html");
        $('#footer').load("fragments/footer.html");
    });
</script>

<body class="fix-header fix-sidebar">
    <!-- Preloader - style you can find in spinners.css -->
    <div class="preloader">
        <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" /> </svg>
    </div>
    <div id="main-wrapper">
        <div class="header" id="header"></div>
        <div id="menu" class="left-sidebar"></div>
        <div class="page-wrapper">
            <div class="row page-titles">
                <div class="col-md-5 align-self-center">
                    <h3 class="text-primary">Registro Clientes</h3>
                </div>
                <div class="col-md-7 align-self-center">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                            <a href="javascript:void(0)">Home</a>
                        </li>
                        <li class="breadcrumb-item active">Registro Cliente</li>
                    </ol>
                </div>
            </div>
            <div class="container-fluid">
                <form id="myForm" class="MyValidation">
                    <div class="row">
                        <div class="col-12">
                            <div class="">
                                <div class="card-body">
                                    <!-- Nav tabs -->
                                    <ul class="nav nav-tabs">
                                        <li class="nav-item">
                                            <a class="nav-link active" data-toggle="tab" href="#client">Cliente</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" data-toggle="tab" href="#veh">Vehiculo</a>
                                        </li>
                                    </ul>
                                    <!-- Tab panes -->
                                    <div class="tab-content">
                                        <div class="tab-pane container active" id="client">
                                            <div class="container">
                                                <br>
                                                <br>
                                                <center>
                                                    <h4>Registrar Cliente</h4>
                                                </center>
                                                <br>
                                                <br>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Nombres</label>
                                                            <input class="form-control" name="clieNombres" type="text" 
                                                             required="required"
                                                            placeholder="Digite nombre del cliente">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Apellidos</label>
                                                            <input class="form-control" required type="text" name="clieApellidos" placeholder="Digite apellidos del cliente">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Cedula</label>
                                                            <input class="form-control" required type="text" name="clieCedula" placeholder="Digite cedula del cliente">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Ciudad</label>
                                                            <input class="form-control" type="text" name="clieCiudad" placeholder="Digite ciudad del cliente">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Direccion</label>
                                                            <input class="form-control" type="text" name="clieDireccion" placeholder="Digite direccion del cliente">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Telefono</label>
                                                            <input class="form-control" type="text" name="clieTelefono" placeholder="Digite telfono del cliente">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Email</label>
                                                            <input class="form-control" required type="email" name="clieEmail" placeholder="Digite email del cliente">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Estado</label>
                                                            <select class="form-control" name="clieEstado">
                                                                <option value="A">Activo</option>
                                                                <option value="I">Inactivo</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <center><input type="button" id="sig" class="btn" value="Siguiente.."></center>
                                            </div>
                                        </div>
                                        <div class="tab-pane container fade" id="veh">
                                            <div class="container">
                                                <br>
                                                <br>
                                                <center>
                                                    <h4>Registrar Vehiculo</h4>
                                                </center>
                                                <br>
                                                <br>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Placa</label>
                                                            <input class="form-control" required="required" name="vehPlaca"
                                                            type="text" placeholder="Digite Placa del vehiculo">
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Tipo Vehiculo</label>
                                                            <select class="MySelect form-control" name="tpvCodigo" 
                                                                ajax="http://186.87.135.186/services/tpvehiculos/findAll" 
                                                                fields="tpvCodigo,tpvDescripcion"
                                                                filter="tpvCodigo">
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-1"></div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Zona</label>
                                                            <select class="MySelect form-control" name="zonaCodigo" 
                                                                ajax="http://186.87.135.186/services/zonas/findAll" 
                                                                fields="zonaCodigo,zonaDescripcion"
                                                                filter="zonaCodigo">
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-5">
                                                        <div class="form-group">
                                                            <label>Estado</label>
                                                            <select class="form-control" name="vehEstado">
                                                                <option value="A">Activo</option>
                                                                <option value="I">Inactivo</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <br/>
                                            <div class="row h-100 justify-content-center align-items-center">
                                                <div class="btn-group" role="group" aria-label="Basic example">
                                                    <button type="button" class="btn btn-info" onclick="$('#myForm').trigger('send')">Save</button>
                                                    <button type="button" class="btn btn-secondary">Clean</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div id="footer"></div>
            <script>
                $('#myForm').on('send', function(){
                    var $form = $('#myForm');
                    var $url = "http://186.87.135.186/services/fabrica/transaction";
                    var $data = $.serializeObject($form);
                    $.ajax({
                        type: "POST",
                        url: $url,
                        data: JSON.stringify($data),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (response) {
                            swal({
                                title: "Cliente Guardado",
                                text: "El Cliente fue registrado correctamente!",
                                icon: "success",
                                buttons: true,
                                dangerMode: true,
                            });
                            console.log(response);
                        },
                        error: function(error){
                            swal({
                                title: "Error Al guardar",
                                text: "No se ha podido completar la petiticion, verifique los datos, o verifique que los servicios esten activos.",
                                icon: "error",
                                buttons: true,
                                dangerMode: true,
                            });
                        }
                    });
                });
            </script>

            <script>
                var item = $('li.nav-item');
            $('#sig').on('click', function(){
                item[1].childNodes[1].click();
            });
            </script>

            <script src="js/plugins/1/jquery.import.js"></script>
            <script src="js/plugins/1/jquery.components.js"></script>
            <script src="js/plugins/src/js/jquery.initialize.min.js"></script>
            <script src="js/plugins/MyPdfReportObject.js"></script>
            <script src="js/plugins/MySelect.js"></script>
            <script src="js/plugins/MyForm.js"></script>
            <script src="js/plugins/MyAlertResponse.js"></script>
        </div>
    </div>
</body>

</html>